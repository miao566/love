<!DOCTYPE html>
<html>
<head>
    <title>卡密读取</title>
    <script>
        // 读取txt文件内容并显示
        function readCardCode() {
            fetch('cardCodes.txt')
                .then(response => response.text()) // 将响应转为文本格式
                .then(data => {
                    var cardCodes = data.split('\n'); // 按行分割文本内容
                    var randomNumber = Math.floor(Math.random() * cardCodes.length); // 随机选择一行
                    var selectedCode = cardCodes[randomNumber].trim(); // 选中的卡密，去除首尾空格
                    
                    // 显示卡密到网页
                    var cardCodeDisplay = document.getElementById('cardCodeDisplay');
                    cardCodeDisplay.innerHTML = '卡密：' + selectedCode;
                    
                    // 记录行数，下次请求时不选择此行
                    var lastSelectedLine = document.getElementById('lastSelectedLine');
                    lastSelectedLine.value = randomNumber.toString();
                })
                .catch(error => {
                    console.log('无法读取卡密文件：' + error);
                });
        }
    </script>
</head>
<body>
    <h1>卡密读取</h1>
    <div id="cardCodeDisplay"></div>
    <button onclick="readCardCode()">随机选择卡密</button>
    <input type="hidden" id="lastSelectedLine" value="-1">
</body>
</html>
